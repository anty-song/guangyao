(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-059b"],{"2A6K":function(e,t,s){},LG0F:function(e,t,s){"use strict";var l=s("2A6K");s.n(l).a},sPjt:function(e,t,s){"use strict";s.r(t);var l=s("P2sY"),a=s.n(l),n=s("t3Un");var o={data:function(){return{dialogFormVisible:!1,textMap:{update:"编辑用户",create:"添加用户"},dialogStatus:"",userTemp:{user_name:"",true_name:"",gender:"1",myself:"",email:"",is_type:""},userTempRole:null,loading:!0,status:[{type:null,value:"全部"},{type:0,value:"正常"},{type:1,value:"禁用"}],roles:[{type:null,value:"全部"},{type:1,value:"超级管理员"},{type:2,value:"普通管理员"},{type:3,value:"审核中心管理员"},{type:4,value:"报告管理中心管理员"},{type:5,value:"系统消息管理员"}],statusValue:"",rolesValue:"",search:"",userListQuery:{status:null,group_id:null,ad_user:null,page:1},responseObject:{},ids:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;this.loading=!0,function(e){return Object(n.a)({url:"/api/admin_list",method:"post",data:e})}(this.userListQuery).then(function(t){console.log(t),1==t.code?(e.responseObject=t,console.log("this.responseObject"+e.responseObject),e.loading=!1):(e.responseObject.data=[],e.loading=!1)})},changeStatus:function(e){this.userListQuery.status=e,this.getUserList()},changeTypes:function(e){this.userListQuery.group_id=e,this.getUserList()},changeRoles:function(e){console.log(e),this.userTemp.is_type="普通用户"==e?"0":"1"},resetTemp:function(){this.userTemp={user_name:"",true_name:"",gender:"1",myself:"",email:"",is_type:""}},handleCreate:function(){this.resetTemp(),this.userTempRole=null,this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){console.log(e),this.userTemp=a()({},e),this.dialogStatus="update",this.dialogFormVisible=!0},createData:function(){var e=this;(function(e){return Object(n.a)({url:"/add_admin",method:"post",data:e})})(this.userTemp).then(function(t){"1"===t.code?(e.responseObject.data.unshift(e.userTemp),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})):e.$notify({title:"失败",message:"创建失败",type:"error",duration:2e3})})},updateData:function(){},handleDelete:function(){deleteUsers(ids).then(function(e){console.log(e)})},handleSelectAll:function(e){this.ids=e,console.log(e)},handleSelect:function(e){console.log(e)},toggleSelection:function(e){console.log(e)},resetPass:function(e){var t=this;this.$confirm("您确定要重置密码？ 重置密码后密码改为000000。",{confirmButtonText:"重置",cancelButtonText:"再想想",cancelButtonClass:"cancel-reset",confirmButtonClass:"confirm-reset",type:"warning",center:!0}).then(function(){(function(e){return Object(n.a)({url:"/reset_admin",method:"post",data:{user_id:e}})})(e).then(function(e){console.log(e),1==e.code?t.$message({type:"success",message:"重置成功!"}):t.$message({type:"error",message:e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消重置"})})}}},r=(s("LG0F"),s("KHd+")),i=Object(r.a)(o,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-container"},[s("div",{staticClass:"filter-container"},[s("div",{staticClass:"filter-box"},[s("span",[e._v("状态：")]),e._v(" "),s("el-select",{staticClass:"status",attrs:{placeholder:"全部"},on:{change:e.changeStatus},model:{value:e.statusValue,callback:function(t){e.statusValue=t},expression:"statusValue"}},e._l(e.status,function(e){return s("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),e._v(" "),s("span",[e._v("用户类型：")]),e._v(" "),s("el-select",{staticClass:"roles",attrs:{placeholder:"全部"},on:{change:e.changeTypes},model:{value:e.rolesValue,callback:function(t){e.rolesValue=t},expression:"rolesValue"}},e._l(e.roles,function(e){return s("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),e._v(" "),s("el-input",{staticClass:"search",attrs:{placeholder:"请输入用户名/姓名/手机号"},model:{value:e.userListQuery.keyword,callback:function(t){e.$set(e.userListQuery,"keyword",t)},expression:"userListQuery.keyword"}},[s("el-button",{staticClass:"search-btn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1),e._v(" "),s("div",{staticClass:"handle-options"},[s("span",{staticClass:"add",on:{click:e.handleCreate}},[s("i",{staticClass:"el-icon-plus"}),e._v("\n          添加\n        ")]),e._v(" "),s("span",{staticClass:"del",on:{click:function(t){e.handleDelete()}}},[s("i",{staticClass:"el-icon-delete"}),e._v("\n          删除\n        ")])])],1)]),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","background-color":"transparent"},attrs:{"empty-text":"",fit:"",data:e.responseObject.data?e.responseObject.data:[],"tooltip-effect":"dark","header-row-class-name":"user-table-header","row-class-name":"user-table-row","header-cell-class-name":"user-table-header-cell"},on:{"select-all":e.handleSelectAll,select:e.handleSelect}},[s("el-table-column",{attrs:{type:"selection"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"admin_name",align:"center",label:"用户名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"group_name",align:"center",label:"角色"}}),e._v(" "),s("el-table-column",{attrs:{prop:"status_name",align:"center",label:"状态"}}),e._v(" "),s("el-table-column",{attrs:{prop:"add_time",align:"center",label:"添加时间"}}),e._v(" "),s("el-table-column",{attrs:{prop:"login_times",align:"center",label:"登陆次数"}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.resetPass(t.row.user_id)}}},[e._v("重置密码")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"}},[e._v("登陆")])]}}])})],1),e._v(" "),s("el-pagination",{staticClass:"user-pagination",attrs:{"current-page":e.responseObject.page,layout:"prev, pager, next, jumper",total:e.responseObject.allTotal}}),e._v(" "),s("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"353px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"dataForm",attrs:{model:e.userTemp,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.userTemp.user_name,callback:function(t){e.$set(e.userTemp,"user_name",t)},expression:"userTemp.user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{model:{value:e.userTemp.true_name,callback:function(t){e.$set(e.userTemp,"true_name",t)},expression:"userTemp.true_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-radio",{attrs:{label:"1"},model:{value:e.userTemp.gender,callback:function(t){e.$set(e.userTemp,"gender",t)},expression:"userTemp.gender"}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:"0"},model:{value:e.userTemp.gender,callback:function(t){e.$set(e.userTemp,"gender",t)},expression:"userTemp.gender"}},[e._v("女")])],1),e._v(" "),s("el-form-item",{attrs:{label:"标签"}},[s("el-input",{model:{value:e.userTemp.myself,callback:function(t){e.$set(e.userTemp,"myself",t)},expression:"userTemp.myself"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"电子邮箱"}},[s("el-input",{model:{value:e.userTemp.email,callback:function(t){e.$set(e.userTemp,"email",t)},expression:"userTemp.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色"}},[s("el-select",{attrs:{placeholder:e.userTempRole?e.userTempRole:"请选择角色"},on:{change:e.changeRoles},model:{value:e.userTempRole,callback:function(t){e.userTempRole=t},expression:"userTempRole"}},[s("el-option",{attrs:{label:"普通用户",value:"普通用户"}}),e._v(" "),s("el-option",{attrs:{label:"评测师",value:"评测师"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);i.options.__file="index.vue";t.default=i.exports}}]);