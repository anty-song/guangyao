(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2f46"],{"44Km":function(e,t,l){"use strict";l.r(t);var a=l("P2sY"),s=l.n(a),n=l("t3Un");var o={data:function(){return{dialogFormVisible:!1,textMap:{update:"编辑用户",create:"添加用户"},dialogStatus:"",userTemp:{user_name:"",true_name:"",gender:"1",myself:"",email:"",is_type:""},userTempRole:null,loading:!0,status:[{type:null,value:"全部"},{type:0,value:"正常"},{type:1,value:"禁用"}],roles:[{type:null,value:"全部"},{type:0,value:"普通用户"},{type:1,value:"测评师"}],statusValue:"全部",rolesValue:"全部",search:"",userListQuery:{status:null,is_type:null,keyword:null,page:1},responseObject:{},ids:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;this.loading=!0,function(e){return Object(n.a)({url:"/user_list",method:"post",data:e})}(this.userListQuery).then(function(t){console.log(t),1==t.code?(e.responseObject=t,e.loading=!1):(e.responseObject.data=[],e.loading=!1)})},changeStatus:function(e){console.log(e),this.userListQuery.status=e,this.getUserList()},changeTypes:function(e){console.log(e),this.userListQuery.is_type=e,this.getUserList()},changeRoles:function(e){console.log(e),this.userTemp.is_type="普通用户"==e?"0":"1"},resetTemp:function(){this.userTemp={user_name:"",true_name:"",gender:"1",myself:"",email:"",is_type:""}},handleCreate:function(){this.resetTemp(),this.userTempRole=null,this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){console.log(e),this.userTemp=s()({},e),this.dialogStatus="update",this.dialogFormVisible=!0},createData:function(){var e=this;(function(e){return Object(n.a)({url:"/add_user",method:"post",data:e})})(this.userTemp).then(function(t){"1"===t.code?(e.responseObject.data.unshift(e.userTemp),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})):e.$notify({title:"失败",message:"创建失败",type:"error",duration:2e3})})},updateData:function(){},handleDelete:function(){(function(e){return Object(n.a)({url:"/delete_users",method:"post",data:{ids:e}})})(ids).then(function(e){console.log(e)})},handleSelectAll:function(e){this.ids=e,console.log(e)},handleSelect:function(e){console.log(e)},toggleSelection:function(e){console.log(e)},resetPass:function(e){var t=this;this.$confirm("您确定要重置密码？ 重置密码后密码改为000000。",{confirmButtonText:"重置",cancelButtonText:"再想想",cancelButtonClass:"cancel-reset",confirmButtonClass:"confirm-reset",type:"warning",center:!0}).then(function(){(function(e){return Object(n.a)({url:"/reset_pwd",method:"post",data:{user_id:e}})})(e).then(function(e){console.log(e),1==e.code?t.$message({type:"success",message:"重置成功!"}):t.$message({type:"error",message:e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消重置"})})}}},i=(l("HLPo"),l("KHd+")),r=Object(i.a)(o,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-container"},[l("div",{staticClass:"filter-container"},[l("div",{staticClass:"filter-box"},[l("span",[e._v("状态：")]),e._v(" "),l("el-select",{staticClass:"status",attrs:{placeholder:"全部"},on:{change:e.changeStatus},model:{value:e.statusValue,callback:function(t){e.statusValue=t},expression:"statusValue"}},e._l(e.status,function(e){return l("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),e._v(" "),l("span",[e._v("用户类型：")]),e._v(" "),l("el-select",{staticClass:"roles",attrs:{placeholder:"全部"},on:{change:e.changeTypes},model:{value:e.rolesValue,callback:function(t){e.rolesValue=t},expression:"rolesValue"}},e._l(e.roles,function(e){return l("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),e._v(" "),l("el-input",{staticClass:"search",attrs:{placeholder:"请输入用户名/姓名/手机号"},model:{value:e.userListQuery.keyword,callback:function(t){e.$set(e.userListQuery,"keyword",t)},expression:"userListQuery.keyword"}},[l("el-button",{staticClass:"search-btn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),e._v(" "),l("div",{staticClass:"handle-box"},[l("div",{staticStyle:{display:"inline-block"}},[l("el-button",{staticClass:"import-btn"},[e._v("批量导入")]),e._v(" "),l("span",{staticClass:"import-msg"},[e._v("点击下载批量导入模板")])],1),e._v(" "),l("div",{staticClass:"handle-options"},[l("span",{staticClass:"add",on:{click:e.handleCreate}},[l("i",{staticClass:"el-icon-plus"}),e._v("\n          添加\n        ")]),e._v(" "),l("span",{staticClass:"del",on:{click:function(t){e.handleDelete()}}},[l("i",{staticClass:"el-icon-delete"}),e._v("\n          删除\n        ")])])])]),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","background-color":"transparent"},attrs:{"empty-text":"",fit:"",data:e.responseObject.data?e.responseObject.data:[],"tooltip-effect":"dark","header-row-class-name":"user-table-header","row-class-name":"user-table-row","header-cell-class-name":"user-table-header-cell"},on:{"select-all":e.handleSelectAll,select:e.handleSelect}},[l("el-table-column",{attrs:{"min-width":"42",type:"selection"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"58",align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),e._v(" "),l("el-table-column",{attrs:{"min-width":"139",prop:"user_name",align:"center",label:"用户名"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"102",prop:"true_name",align:"center",label:"真实姓名"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"59",prop:"name",align:"center",label:"积分"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"90",prop:"user_amount",align:"center",label:"余额"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"166",prop:"type_name",align:"center",label:"用户类型"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"232",prop:"email",align:"center",label:"电子邮箱"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"102",prop:"name",align:"center",label:"粉丝量"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"98",prop:"name",align:"center",label:"关注度"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"70",prop:"status_name",align:"center",label:"状态"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"146",prop:"add_date",align:"center",label:"添加时间"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"102",prop:"login_num",align:"center",label:"登陆次数"}}),e._v(" "),l("el-table-column",{attrs:{"min-width":"258",prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.resetPass(t.row.user_id)}}},[e._v("重置密码")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"}},[e._v("登陆")])]}}])})],1),e._v(" "),l("el-pagination",{staticClass:"user-pagination",attrs:{"current-page":e.responseObject.page,layout:"prev, pager, next, jumper",total:e.responseObject.allTotal}}),e._v(" "),l("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"353px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"dataForm",attrs:{model:e.userTemp,"label-width":"70px"}},[l("el-form-item",{attrs:{label:"用户名"}},[l("el-input",{model:{value:e.userTemp.user_name,callback:function(t){e.$set(e.userTemp,"user_name",t)},expression:"userTemp.user_name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{model:{value:e.userTemp.true_name,callback:function(t){e.$set(e.userTemp,"true_name",t)},expression:"userTemp.true_name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"性别"}},[l("el-radio",{attrs:{label:"1"},model:{value:e.userTemp.gender,callback:function(t){e.$set(e.userTemp,"gender",t)},expression:"userTemp.gender"}},[e._v("男")]),e._v(" "),l("el-radio",{attrs:{label:"0"},model:{value:e.userTemp.gender,callback:function(t){e.$set(e.userTemp,"gender",t)},expression:"userTemp.gender"}},[e._v("女")])],1),e._v(" "),l("el-form-item",{attrs:{label:"标签"}},[l("el-input",{model:{value:e.userTemp.myself,callback:function(t){e.$set(e.userTemp,"myself",t)},expression:"userTemp.myself"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"电子邮箱"}},[l("el-input",{model:{value:e.userTemp.email,callback:function(t){e.$set(e.userTemp,"email",t)},expression:"userTemp.email"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色"}},[l("el-select",{attrs:{placeholder:e.userTempRole?e.userTempRole:"请选择角色"},on:{change:e.changeRoles},model:{value:e.userTempRole,callback:function(t){e.userTempRole=t},expression:"userTempRole"}},[l("el-option",{attrs:{label:"普通用户",value:"普通用户"}}),e._v(" "),l("el-option",{attrs:{label:"评测师",value:"评测师"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="index.vue";t.default=r.exports},HLPo:function(e,t,l){"use strict";var a=l("I+PS");l.n(a).a},"I+PS":function(e,t,l){}}]);